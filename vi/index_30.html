<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../triz-base.css">
    <script defer src="../triz-nav.js"></script>
    <title>Nguy√™n t·∫Øc 30: S·ª≠ d·ª•ng v·ªè d·∫ªo v√† m√†ng m·ªèng</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #333;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            text-align: center;
        }

        h1 {
            font-size: 3.2em;
            margin-bottom: 10px;
            color: white;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
            animation: titleWave 4s ease-in-out infinite alternate;
            background: linear-gradient(45deg, #FFD700, #FFA500, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes titleWave {
            0% {
                transform: translateY(-5px) rotate(-1deg) scale(1);
            }

            100% {
                transform: translateY(5px) rotate(1deg) scale(1.02);
            }
        }

        .subtitle {
            font-size: 1.6em;
            margin-bottom: 30px;
            color: white;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Enhanced Progress Section */
        .progress-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            width: 100%;
            height: 25px;
            background: #ecf0f1;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            border: 3px solid rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #e74c3c, #f39c12, #2ecc71);
            width: 0%;
            transition: width 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 33%, rgba(255, 255, 255, 0.4) 50%, transparent 66%);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .progress-text {
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Knowledge Quiz Section */
        .quiz-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .quiz-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .quiz-question {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .quiz-option {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: inherit;
            font-size: 1em;
            font-weight: bold;
        }

        .quiz-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .quiz-option.correct {
            background: linear-gradient(135deg, #00b894, #00a085);
            animation: correctAnswer 0.6s ease;
        }

        .quiz-option.incorrect {
            background: linear-gradient(135deg, #e17055, #d63031);
            animation: incorrectAnswer 0.6s ease;
        }

        @keyframes correctAnswer {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        @keyframes incorrectAnswer {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        /* Enhanced Comparison Section */
        .comparison-section {
            display: flex;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .playhouse-demo {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 35px;
            flex: 1;
            min-width: 400px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .playhouse-demo:hover {
            transform: translateY(-10px) scale(1.02);
        }

        .playhouse-demo h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 2.2em;
        }

        /* Enhanced Scene Setup */
        .building-scene {
            position: relative;
            height: 450px;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 60%, #8FBC8F 100%);
            border-radius: 20px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        /* Enhanced Background Elements */
        .sun {
            position: absolute;
            top: 20px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: radial-gradient(circle, #FFD700, #FFA500);
            border-radius: 50%;
            animation: sunShine 4s ease-in-out infinite;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
        }

        @keyframes sunShine {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
            }

            50% {
                transform: scale(1.1);
                box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
            }
        }

        .cloud {
            position: absolute;
            background: white;
            border-radius: 50px;
            opacity: 0.9;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .cloud1 {
            top: 40px;
            left: 20px;
            width: 80px;
            height: 40px;
            animation: cloudFloat1 20s linear infinite;
        }

        .cloud2 {
            top: 70px;
            left: -60px;
            width: 60px;
            height: 30px;
            animation: cloudFloat2 25s linear infinite 5s;
        }

        @keyframes cloudFloat1 {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(500px);
            }
        }

        @keyframes cloudFloat2 {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(450px);
            }
        }

        .grass {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: linear-gradient(to top, #228B22, #32CD32);
            border-radius: 0 0 20px 20px;
        }

        .grass::before {
            content: 'üå∏ üåº üå∏ üåº üå∏ ü¶ã';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 1.2em;
            animation: flowerSway 3s ease-in-out infinite;
        }

        @keyframes flowerSway {

            0%,
            100% {
                transform: rotate(-2deg);
            }

            50% {
                transform: rotate(2deg);
            }
        }

        /* Enhanced Character */
        .character {
            position: absolute;
            bottom: 60px;
            font-size: 3.5em;
            transition: all 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            filter: drop-shadow(0 8px 15px rgba(0, 0, 0, 0.3));
            user-select: none;
            z-index: 10;
            right: 50%;
            transform: translateX(50%);
            border-radius: 50%;
            padding: 10px;
        }

        .character:hover {
            transform: translateX(50%) scale(1.15);
            background: rgba(255, 255, 255, 0.2);
        }

        .character.working {
            animation: characterWork 1.5s ease-in-out infinite;
        }

        .character.celebrating {
            animation: characterCelebrate 0.8s ease-in-out 4;
        }

        @keyframes characterWork {

            0%,
            100% {
                transform: translateX(50%) rotate(-8deg);
            }

            50% {
                transform: translateX(50%) rotate(8deg);
            }
        }

        @keyframes characterCelebrate {

            0%,
            100% {
                transform: translateX(50%) scale(1) rotate(0deg);
            }

            25% {
                transform: translateX(50%) scale(1.3) rotate(-10deg);
            }

            75% {
                transform: translateX(50%) scale(1.3) rotate(10deg);
            }
        }

        /* Enhanced Wooden Playhouse */
        .wooden-playhouse {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            width: 220px;
            height: 170px;
            opacity: 0;
            transition: all 2.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .wooden-playhouse.built {
            opacity: 1;
            transform: translateX(-50%) scale(1);
        }

        .house-base {
            width: 100%;
            height: 120px;
            background: linear-gradient(145deg, #8B4513, #A0522D);
            border-radius: 10px;
            position: relative;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            border: 2px solid #654321;
        }

        .house-roof {
            position: absolute;
            top: -35px;
            left: -25px;
            width: 0;
            height: 0;
            border-left: 135px solid transparent;
            border-right: 135px solid transparent;
            border-bottom: 70px solid #654321;
            filter: drop-shadow(0 8px 15px rgba(0, 0, 0, 0.4));
        }

        .house-door {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 45px;
            height: 70px;
            background: linear-gradient(145deg, #2c3e50, #34495e);
            border-radius: 8px 8px 0 0;
            border: 2px solid #1a252f;
        }

        .house-window {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 35px;
            height: 35px;
            background: #87CEEB;
            border: 4px solid #654321;
            border-radius: 8px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .building-tools {
            position: absolute;
            bottom: 45px;
            left: 25px;
            font-size: 1.8em;
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        .building-tools.visible {
            opacity: 1;
            animation: toolsBounce 1.5s ease-in-out infinite;
        }

        @keyframes toolsBounce {

            0%,
            100% {
                transform: translateY(0) rotate(-5deg);
            }

            50% {
                transform: translateY(-15px) rotate(5deg);
            }
        }

        /* Enhanced Tent Playhouse */
        .tent-playhouse {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            width: 200px;
            height: 140px;
            opacity: 0;
            transition: all 2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .tent-playhouse.setup {
            opacity: 1;
            transform: translateX(-50%) scale(1);
        }

        .tent-body {
            width: 100%;
            height: 120px;
            background: linear-gradient(145deg, #FF6B6B, #FF8E53, #FFD93D);
            border-radius: 60px 60px 15px 15px;
            position: relative;
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
            animation: tentGentle 6s ease-in-out infinite;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        @keyframes tentGentle {

            0%,
            100% {
                transform: scale(1) rotate(0deg);
            }

            33% {
                transform: scale(1.02) rotate(0.5deg);
            }

            66% {
                transform: scale(1.01) rotate(-0.5deg);
            }
        }

        .tent-entrance {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 55px;
            height: 80px;
            background: linear-gradient(145deg, #2c3e50, #34495e);
            border-radius: 25px 25px 0 0;
            border: 3px solid #FF6B6B;
        }

        .tent-poles {
            position: absolute;
            top: -15px;
            left: 25px;
            right: 25px;
            height: 8px;
            background: linear-gradient(90deg, #95a5a6, #bdc3c7);
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .tent-stakes {
            position: absolute;
            bottom: -25px;
            left: 15px;
            right: 15px;
            height: 4px;
            background: #7f8c8d;
            border-radius: 3px;
        }

        .tent-bag {
            position: absolute;
            bottom: 50px;
            right: 25px;
            font-size: 2.5em;
            opacity: 1;
            transition: all 1.5s ease;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
        }

        .tent-bag.hidden {
            opacity: 0;
            transform: scale(0.3) rotate(180deg);
        }

        /* Enhanced Control Buttons */
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .control-button {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            border: none;
            color: white;
            padding: 20px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 35px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-family: inherit;
            position: relative;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .control-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.8s ease, height 0.8s ease;
        }

        .control-button:not(:disabled):hover::before {
            width: 400px;
            height: 400px;
        }

        .control-button:not(:disabled):hover {
            transform: translateY(-6px) scale(1.05);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .control-button:not(:disabled):active {
            transform: translateY(-2px) scale(1.02);
        }

        .control-button.build {
            background: linear-gradient(45deg, #8B4513, #A0522D, #CD853F);
        }

        .control-button.setup {
            background: linear-gradient(45deg, #27ae60, #2ecc71, #58D68D);
        }

        /* Enhanced Status Display */
        .status-display {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            margin: 30px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6em;
            font-weight: bold;
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            border: 3px solid rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .status-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            transition: left 0.8s ease;
        }

        .status-display.updating::before {
            left: 100%;
        }

        /* Enhanced Comparison Metrics */
        .comparison-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 18px;
            margin: 25px 0;
        }

        .metric {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 18px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            transition: transform 0.4s ease;
            border: 2px solid rgba(0, 0, 0, 0.1);
        }

        .metric:hover {
            transform: translateY(-8px) scale(1.05);
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 8px 0;
        }

        .metric-label {
            font-size: 0.9em;
            color: #7f8c8d;
            font-weight: bold;
        }

        /* Enhanced Problem/Solution Indicators */
        .problem-indicators,
        .solution-indicators {
            position: absolute;
            top: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .problem-indicators {
            right: 15px;
        }

        .solution-indicators {
            left: 15px;
        }

        .problem-tag {
            background: rgba(231, 76, 60, 0.95);
            color: white;
            padding: 6px 12px;
            border-radius: 18px;
            font-size: 0.8em;
            font-weight: bold;
            animation: problemPulse 3s ease-in-out infinite;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        @keyframes problemPulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.7;
                transform: scale(1.08);
            }
        }

        .solution-tag {
            background: rgba(46, 204, 113, 0.95);
            color: white;
            padding: 6px 12px;
            border-radius: 18px;
            font-size: 0.8em;
            font-weight: bold;
            animation: solutionGlow 4s ease-in-out infinite;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        @keyframes solutionGlow {

            0%,
            100% {
                box-shadow: 0 0 12px rgba(46, 204, 113, 0.6);
            }

            50% {
                box-shadow: 0 0 25px rgba(46, 204, 113, 0.9);
            }
        }

        /* Enhanced Educational Content */
        .explanation {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 40px;
            margin: 50px 0;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            text-align: left;
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .explanation h2 {
            color: #2c3e50;
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.4em;
        }

        .principle-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 35px 0;
        }

        .step {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1);
            color: white;
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.4s ease;
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .step:hover {
            transform: translateY(-12px) scale(1.03) rotate(1deg);
        }

        .step-number {
            font-size: 3.5em;
            font-weight: bold;
            margin-bottom: 18px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.4);
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 35px 0;
        }

        .example-item {
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            color: white;
            padding: 30px;
            border-radius: 22px;
            text-align: center;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
            cursor: pointer;
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .example-item:hover {
            transform: translateY(-12px) rotate(3deg) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .example-emoji {
            font-size: 3.5em;
            margin-bottom: 18px;
            animation: exampleFloat 6s ease-in-out infinite;
        }

        @keyframes exampleFloat {

            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }

            33% {
                transform: translateY(-12px) rotate(5deg);
            }

            66% {
                transform: translateY(-6px) rotate(-3deg);
            }
        }

        /* Enhanced Reset Button */
        .reset-button {
            background: linear-gradient(45deg, #9b59b6, #8e44ad, #e91e63);
            border: none;
            color: white;
            padding: 18px 35px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            margin: 25px auto;
            display: block;
            transition: all 0.4s ease;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .reset-button:hover {
            transform: translateY(-5px) scale(1.08);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
        }

        /* Enhanced Effects */
        .construction-effect,
        .setup-effect {
            position: absolute;
            font-size: 2em;
            opacity: 0;
            pointer-events: none;
            z-index: 15;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .construction-effect.show {
            opacity: 1;
            animation: constructionSplash 2.5s ease-out;
        }

        @keyframes constructionSplash {
            0% {
                transform: translate(-50%, -50%) scale(0.3) rotate(-180deg);
                opacity: 1;
            }

            50% {
                transform: translate(-50%, -50%) scale(1.8) rotate(-90deg);
                opacity: 0.9;
            }

            100% {
                transform: translate(-50%, -50%) scale(2.5) rotate(0deg);
                opacity: 0;
            }
        }

        .setup-effect.show {
            opacity: 1;
            animation: setupMagic 2s ease-out;
        }

        @keyframes setupMagic {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(-360deg);
                opacity: 1;
            }

            50% {
                transform: translate(-50%, -50%) scale(1.5) rotate(-180deg);
                opacity: 0.95;
            }

            100% {
                transform: translate(-50%, -50%) scale(2) rotate(0deg);
                opacity: 0;
            }
        }

        /* Timer Display */
        .timer-display {
            position: absolute;
            top: 15px;
            left: 12px;
            transform: none;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 1.2em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .timer-display.visible {
            opacity: 1;
        }

        /* Sound Visualization */
        .sound-wave {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            gap: 3px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sound-wave.active {
            opacity: 1;
        }

        .sound-bar {
            width: 4px;
            background: #e74c3c;
            border-radius: 2px;
            animation: soundBounce 0.5s ease-in-out infinite alternate;
        }

        .sound-bar:nth-child(1) {
            height: 20px;
            animation-delay: 0s;
        }

        .sound-bar:nth-child(2) {
            height: 30px;
            animation-delay: 0.1s;
        }

        .sound-bar:nth-child(3) {
            height: 25px;
            animation-delay: 0.2s;
        }

        .sound-bar:nth-child(4) {
            height: 35px;
            animation-delay: 0.3s;
        }

        .sound-bar:nth-child(5) {
            height: 20px;
            animation-delay: 0.4s;
        }

        @keyframes soundBounce {
            0% {
                transform: scaleY(0.3);
            }

            100% {
                transform: scaleY(1);
            }
        }

        /* Responsive Design Enhancements */
        @media (max-width: 768px) {
            .comparison-section {
                flex-direction: column;
            }

            .playhouse-demo {
                min-width: 320px;
            }

            .control-buttons {
                flex-direction: column;
                align-items: center;
            }

            h1 {
                font-size: 2.4em;
            }

            .subtitle {
                font-size: 1.3em;
            }

            .building-scene {
                height: 350px;
            }

            .character {
                font-size: 2.8em;
            }
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Achievement Badges */
        .achievement-badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .achievement-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 0.9em;
            opacity: 0.3;
            transition: all 0.5s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .achievement-badge.earned {
            opacity: 1;
            transform: scale(1.1);
            animation: badgeEarned 1s ease;
        }

        @keyframes badgeEarned {
            0% {
                transform: scale(0.8) rotate(-10deg);
            }

            50% {
                transform: scale(1.2) rotate(5deg);
            }

            100% {
                transform: scale(1.1) rotate(0deg);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üè† Nguy√™n t·∫Øc 30: S·ª≠ d·ª•ng v·ªè d·∫ªo v√† m√†ng m·ªèng üé™</h1>
        <p class="subtitle">Ng√¥i nh√† b·∫≠t l√™n t∆∞∆°ng t√°c - Kh√°m ph√° s·ª©c m·∫°nh c·ªßa thi·∫øt k·∫ø linh ho·∫°t!</p>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">H√£y th·ª≠ c·∫£ hai c√°ch ch∆°i nh√† ƒë·ªÉ h·ªçc nh√©! üèóÔ∏è</div>
        </div>

        <div class="achievement-badges">
            <div class="achievement-badge" id="badge1">üèóÔ∏è Th·ª£ x√¢y</div>
            <div class="achievement-badge" id="badge2">‚ö° B·∫≠c th·∫ßy t·ªëc ƒë·ªô</div>
            <div class="achievement-badge" id="badge3">üß† Chuy√™n gia TRIZ</div>
            <div class="achievement-badge" id="badge4">üåü Nh√† s√°ng t·∫°o</div>
        </div>

        <div class="comparison-section">
            <!-- Solid Wooden Playhouse Demo -->
            <div class="playhouse-demo">
                <h2>üî® C√°ch truy·ªÅn th·ªëng n·∫∑ng n·ªÅ</h2>
                <div class="building-scene">
                    <div class="timer-display" id="buildTimer">‚è±Ô∏è 00:00</div>
                    <div class="sun"></div>
                    <div class="cloud cloud1"></div>
                    <div class="cloud cloud2"></div>
                    <div class="grass"></div>

                    <div class="character" id="buildCharacter" onclick="buildWoodenHouse()" role="button" tabindex="0"
                        aria-label="Nh·∫•n ƒë·ªÉ x√¢y nh√† g·ªó">
                        üßí
                    </div>

                    <div class="wooden-playhouse" id="woodenHouse">
                        <div class="house-base">
                            <div class="house-roof"></div>
                            <div class="house-door"></div>
                            <div class="house-window"></div>
                        </div>
                    </div>

                    <div class="building-tools" id="buildingTools">üî® ü™ö üî© üìê ‚öíÔ∏è</div>
                    <div class="construction-effect" id="constructionEffect">üí•</div>

                    <div class="sound-wave" id="buildSoundWave">
                        <div class="sound-bar"></div>
                        <div class="sound-bar"></div>
                        <div class="sound-bar"></div>
                        <div class="sound-bar"></div>
                        <div class="sound-bar"></div>
                    </div>

                    <div class="problem-indicators">
                        <div class="problem-tag">V·∫≠t li·ªáu n·∫∑ng</div>
                        <div class="problem-tag">Nhi·ªÅu C√¥ng C·ª•</div>
                        <div class="problem-tag">Kh√≥ Di Chuy·ªÉn</div>
                        <div class="problem-tag">T·ªën nhi·ªÅu th·ªùi gian</div>
                    </div>
                </div>

                <div class="control-buttons">
                    <button class="control-button build" id="buildButton" onclick="buildWoodenHouse()">
                        üî® X√¢y nh√† g·ªó
                    </button>
                </div>

                <div class="comparison-metrics">
                    <div class="metric">
                        <div class="metric-value">ü™µ</div>
                        <div class="metric-label">G·ªó ƒë·∫∑c</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="buildTimeMetric">‚è∞</div>
                        <div class="metric-label">Th·ªùi gian x√¢y d·ª±ng</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">üèãÔ∏è</div>
                        <div class="metric-label">R·∫•t n·∫∑ng</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">üîß</div>
                        <div class="metric-label">Nhi·ªÅu C√¥ng C·ª•</div>
                    </div>
                </div>
            </div>

            <!-- Flexible Tent Playhouse Demo -->
            <div class="playhouse-demo">
                <h2>üé™ Gi·∫£i ph√°p TRIZ linh ho·∫°t</h2>
                <div class="building-scene">
                    <div class="timer-display" id="setupTimer">‚è±Ô∏è 00:00</div>
                    <div class="sun"></div>
                    <div class="cloud cloud1"></div>
                    <div class="cloud cloud2"></div>
                    <div class="grass"></div>

                    <div class="character" id="setupCharacter" onclick="setupTent()" role="button" tabindex="0"
                        aria-label="Nh·∫•n ƒë·ªÉ d·ª±ng l·ªÅu b·∫≠t l√™n">
                        üßí
                    </div>

                    <div class="tent-playhouse" id="tentHouse">
                        <div class="tent-body">
                            <div class="tent-entrance"></div>
                            <div class="tent-poles"></div>
                            <div class="tent-stakes"></div>
                        </div>
                    </div>

                    <div class="tent-bag" id="tentBag">üéí</div>
                    <div class="setup-effect" id="setupEffect">‚ú®</div>

                    <div class="sound-wave" id="setupSoundWave">
                        <div class="sound-bar"></div>
                        <div class="sound-bar"></div>
                        <div class="sound-bar"></div>
                        <div class="sound-bar"></div>
                        <div class="sound-bar"></div>
                    </div>

                    <div class="solution-indicators">
                        <div class="solution-tag">V·∫£i nh·∫π</div>
                        <div class="solution-tag">L·∫Øp ƒë·∫∑t nhanh</div>
                        <div class="solution-tag">D·ªÖ mang theo</div>
                        <div class="solution-tag">Thi·∫øt k·∫ø linh ho·∫°t</div>
                    </div>
                </div>

                <div class="control-buttons">
                    <button class="control-button setup" id="setupButton" onclick="setupTent()">
                        üé™ L·ªÅu b·∫≠t l√™n
                    </button>
                </div>

                <div class="comparison-metrics">
                    <div class="metric">
                        <div class="metric-value">üßµ</div>
                        <div class="metric-label">V·∫£i m·ªèng</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="setupTimeMetric">‚ö°</div>
                        <div class="metric-label">Th·ªùi gian l·∫Øp ƒë·∫∑t</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">ü™∂</div>
                        <div class="metric-label">Si√™u nh·∫π</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">üôå</div>
                        <div class="metric-label">Ch·ªâ c·∫ßn tay</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="status-display" id="statusDisplay">
            H√£y th·ª≠ x√¢y nh√† g·ªó tr∆∞·ªõc, r·ªìi kh√°m ph√° ph√©p m√†u TRIZ! üè†‚ú®
        </div>

        <div class="quiz-section" id="quizSection">
            <div class="quiz-question" id="quizQuestion">
                üß† ƒê·ªë nhanh: ∆Øu ƒëi·ªÉm ch√≠nh c·ªßa vi·ªác d√πng v·ªè d·∫ªo thay cho v·∫≠t li·ªáu ƒë·∫∑c l√† g√¨?
            </div>
            <div class="quiz-options">
                <button class="quiz-option" onclick="answerQuiz(0)">Ch√∫ng c√≥ nhi·ªÅu m√†u s·∫Øc h∆°n</button>
                <button class="quiz-option" onclick="answerQuiz(1)">Ch√∫ng nh·∫π h∆°n v√† d·ªÖ mang theo h∆°n</button>
                <button class="quiz-option" onclick="answerQuiz(2)">Ch√∫ng ƒë·∫Øt h∆°n</button>
                <button class="quiz-option" onclick="answerQuiz(3)">Ch√∫ng b·ªÅn h∆°n</button>
            </div>
        </div>

        <button class="reset-button" id="resetButton" onclick="resetDemo()">üîÑ L√†m m·ªõi m√¥ ph·ªèng</button>

        <div class="explanation">
            <h2>üß† Hi·ªÉu v·ªÅ Nguy√™n t·∫Øc 30: S·ª≠ d·ª•ng v·ªè d·∫ªo v√† m√†ng m·ªèng</h2>

            <div class="principle-steps">
                <div class="step">
                    <div class="step-number">1Ô∏è‚É£</div>
                    <div><strong>X√°c ƒë·ªãnh v·∫•n ƒë·ªÅ:</strong><br>V·∫≠t li·ªáu ƒë·∫∑c th√¨ n·∫∑ng, c·∫ßn nhi·ªÅu d·ª•ng c·ª• v√† kh√≥ di chuy·ªÉn ho·∫∑c thay ƒë·ªïi!</div>
                </div>
                <div class="step">
                    <div class="step-number">2Ô∏è‚É£</div>
                    <div><strong>√Åp d·ª•ng thay th·∫ø:</strong><br>Thay th·∫ø c·∫•u tr√∫c ƒë·∫∑c b·∫±ng v·ªè d·∫ªo v√† m√†ng m·ªèng c√≥ th·ªÉ th·ª±c hi·ªán c√πng ch·ª©c nƒÉng!</div>
                </div>
                <div class="step">
                    <div class="step-number">3Ô∏è‚É£</div>
                    <div><strong>Kh√°m ph√° l·ª£i √≠ch:</strong><br>V·∫≠t li·ªáu m·ªèng, d·∫ªo c√≥ th·ªÉ nh·∫π h∆°n, tri·ªÉn khai nhanh h∆°n v√† th√≠ch nghi t·ªët h∆°n m√† v·∫´n gi·ªØ ch·ª©c nƒÉng!</div>
                </div>
            </div>

            <p><strong>V·ªè d·∫ªo</strong> l√† b·ªÅ m·∫∑t m·ªèng, u·ªën cong ƒë∆∞·ª£c m√† v·∫´n gi·ªØ v·ªØng c·∫•u tr√∫c v√† r·∫•t nh·∫π!</p>
            <p><strong>M√†ng m·ªèng</strong> l√† v·∫≠t li·ªáu si√™u m·ªèng c√≥ th·ªÉ k√©o d√£n, g·∫≠p l·∫°i v√† th√≠ch nghi v·ªõi nhi·ªÅu h√¨nh d·∫°ng, nhu c·∫ßu!</p>
            <p>üéØ <strong>Nguy√™n l√Ω c·ªët l√µi:</strong> Thay v√¨ d√πng c√°c b·ªô ph·∫≠n d√†y, n·∫∑ng, c·ª©ng, h√£y d√πng c√°c l·ªõp m·ªèng, nh·∫π, v·∫≠t li·ªáu d·∫ªo c√≥ th·ªÉ g·∫≠p, u·ªën v√† th√≠ch nghi m√† v·∫´n ƒë·∫£m b·∫£o ch·ª©c nƒÉng thi·∫øt y·∫øu!</p>
        </div>

        <div class="explanation">
            <h2>üåü ·ª®ng d·ª•ng th·ª±c t·∫ø b·∫°n g·∫∑p m·ªói ng√†y!</h2>
            <div class="examples-grid">
                <div class="example-item" onclick="showExampleDetail('umbrella')">
                    <div class="example-emoji">‚òÇÔ∏è</div>
                    <strong>√î che m∆∞a</strong><br>
                    V·ªè v·∫£i m·ªèng thay v√¨ ph·∫£i mang m√°i nh√† n·∫∑ng n·ªÅ!
                </div>
                <div class="example-item" onclick="showExampleDetail('raincoat')">
                    <div class="example-emoji">üß•</div>
                    <strong>√Åo m∆∞a</strong><br>
                    L·ªõp v·ªè ch·ªëng n∆∞·ªõc d·∫ªo b·∫°n c√≥ th·ªÉ m·∫∑c thay v√¨ b·∫£o v·ªá c·ª©ng nh·∫Øc!
                </div>
                <div class="example-item" onclick="showExampleDetail('bubbles')">
                    <div class="example-emoji">ü´ß</div>
                    <strong>Bong b√≥ng x√† ph√≤ng</strong><br>
                    M√†ng x√† ph√≤ng si√™u m·ªèng gi·ªØ kh√¥ng kh√≠ th√†nh h√¨nh c·∫ßu ho√†n h·∫£o!
                </div>
                <div class="example-item" onclick="showExampleDetail('balloons')">
                    <div class="example-emoji">üéà</div>
                    <strong>B√≥ng bay</strong><br>
                    V·ªè d·∫ªo c√≥ th·ªÉ ph·ªìng l√™n v√† x·∫πp xu·ªëng ƒë·ªÉ ch·ª©a kh√≠!
                </div>
                <div class="example-item" onclick="showExampleDetail('tarp')">
                    <div class="example-emoji">üèïÔ∏è</div>
                    <strong>B·∫°t che & ph·ªß</strong><br>
                    L·ªõp m√†ng m·ªèng b·∫£o v·ªá thay cho m√°i nh√† ƒë·∫∑c n·∫∑ng!
                </div>
                <div class="example-item" onclick="showExampleDetail('inflatable')">
                    <div class="example-emoji">üõü</div>
                    <strong>Thi·∫øt b·ªã b∆°m h∆°i</strong><br>
                    V·ªè d·∫ªo b∆°m h∆°i d√πng cho an to√†n v√† gi·∫£i tr√≠!
                </div>
                <div class="example-item" onclick="showExampleDetail('greenhouse')">
                    <div class="example-emoji">üå±</div>
                    <strong>M√†ng nh√† k√≠nh</strong><br>
                    M√†ng nh·ª±a m·ªèng thay cho k√≠nh n·∫∑ng!
                </div>
                <div class="example-item" onclick="showExampleDetail('membrane')">
                    <div class="example-emoji">üè¢</div>
                    <strong>M√†ng ki·∫øn tr√∫c</strong><br>
                    V·ªè x√¢y d·ª±ng d·∫ªo cho c√°c c√¥ng tr√¨nh hi·ªán ƒë·∫°i nh·∫π!
                </div>
            </div>
        </div>

        <div class="explanation">
            <h2>üéØ V√¨ sao v·ªè d·∫ªo v√† m√†ng m·ªèng l√† cu·ªôc c√°ch m·∫°ng!</h2>
            <p>Nguy√™n l√Ω TRIZ n√†y gi√∫p ta t·∫°o ra gi·∫£i ph√°p:</p>
            <p>‚Ä¢ <strong>Nh·∫π h∆°n r·∫•t nhi·ªÅu v√† d·ªÖ mang theo</strong> üéí</p>
            <p>‚Ä¢ <strong>Tri·ªÉn khai v√† thu d·ªçn nhanh h∆°n</strong> ‚ö°</p>
            <p>‚Ä¢ <strong>C·∫ßn √≠t d·ª•ng c·ª• v√† k·ªπ nƒÉng h∆°n</strong> üôå</p>
            <p>‚Ä¢ <strong>Th√≠ch nghi v·ªõi nhi·ªÅu h√¨nh d·∫°ng v√† kh√¥ng gian</strong> üîÑ</p>
            <p>‚Ä¢ <strong>Hi·ªáu qu·∫£ kinh t·∫ø h∆°n v·∫≠t li·ªáu ƒë·∫∑c</strong> üí∞</p>
            <p>‚Ä¢ <strong>D·ªÖ c·∫•t gi·ªØ khi kh√¥ng d√πng</strong> üì¶</p>
            <p>‚Ä¢ <strong>Th√¢n thi·ªán m√¥i tr∆∞·ªùng h∆°n</strong> üå±</p>
            <br>
            <p><em>ƒê·ªïi m·ªõi th∆∞·ªùng ƒë·∫øn t·ª´ vi·ªác l√†m m·ªçi th·ª© m·ªèng h∆°n, d·∫ªo h∆°n thay v√¨ d√†y v√† c·ª©ng h∆°n! üí°</em></p>
        </div>
    </div>

    <script>
        let demoUsage = { wooden: 0, tent: 0 };
        let isAnimating = false;
        let hasCompletedBoth = false;
        let quizAnswered = false;
        let buildStartTime = 0;
        let setupStartTime = 0;
        let achievements = {
            builder: false,
            speedMaster: false,
            trizExpert: false,
            innovator: false
        };

        function updateProgress() {
            const total = demoUsage.wooden + demoUsage.tent;
            const percentage = Math.min((total / 2) * 100, 100);

            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');

            progressFill.style.width = percentage + '%';

            if (total === 0) {
                progressText.textContent = 'H√£y th·ª≠ c·∫£ hai c√°ch ch∆°i nh√† ƒë·ªÉ h·ªçc nh√©! üèóÔ∏è';
            } else if (total === 1) {
                progressText.textContent = 'Tuy·ªát v·ªùi! Gi·ªù h√£y th·ª≠ c√°ch c√≤n l·∫°i ƒë·ªÉ th·∫•y s·ª± kh√°c bi·ªát! üåü';
                earnAchievement('builder');
            }
        }

        function earnAchievement(type) {
            if (!achievements[type]) {
                achievements[type] = true;
                const badge = document.getElementById('badge' + (type === 'builder' ? '1' : type === 'speedMaster' ? '2' : type === 'trizExpert' ? '3' : '4'));
                badge.classList.add('earned');

                // Show achievement notification
                const notification = document.createElement('div');
                notification.innerHTML = `üèÜ Th√†nh t·ª±u ƒë·∫°t ƒë∆∞·ª£c: ${badge.textContent}!`;
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #FFD700, #FFA500);
                    color: #333;
                    padding: 15px 25px;
                    border-radius: 20px;
                    font-weight: bold;
                    z-index: 2000;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    animation: achievementSlide 0.5s ease-out;
                `;

                addKeyframes('achievementSlide', `
                    from { transform: translateX(120%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                `);

                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.animation = 'achievementSlideOut 0.5s ease-in';
                    addKeyframes('achievementSlideOut', `
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(120%); opacity: 0; }
                    `);
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 500);
                }, 3000);
            }
        }

        function showQuiz() {
            const quizSection = document.getElementById('quizSection');
            quizSection.classList.add('visible');
        }

        function answerQuiz(selectedIndex) {
            if (quizAnswered) return;

            const options = document.querySelectorAll('.quiz-option');
            const correctIndex = 1; // "Ch√∫ng nh·∫π h∆°n v√† d·ªÖ mang theo h∆°n"

            quizAnswered = true;

            options.forEach((option, index) => {
                if (index === correctIndex) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== correctIndex) {
                    option.classList.add('incorrect');
                }
                option.disabled = true;
            });

            if (selectedIndex === correctIndex) {
                earnAchievement('trizExpert');
                setTimeout(() => {
                    document.getElementById('quizQuestion').innerHTML = 'üéâ Correct! You understand the core benefit of flexible shells!';
                }, 1000);
            } else {
                setTimeout(() => {
                    document.getElementById('quizQuestion').innerHTML = 'üí° ƒê√°p √°n ƒë√∫ng l√†: Ch√∫ng nh·∫π h∆°n v√† d·ªÖ mang theo h∆°n!';
                }, 1000);
            }
        }

        function disableButtons() {
            document.getElementById('buildButton').disabled = true;
            document.getElementById('setupButton').disabled = true;
        }

        function enableButtons() {
            document.getElementById('buildButton').disabled = false;
            document.getElementById('setupButton').disabled = false;
        }

        function updateTimer(timerId, startTime) {
            const timer = document.getElementById(timerId);
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            timer.textContent = `‚è±Ô∏è ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function showTimer(timerId) {
            document.getElementById(timerId).classList.add('visible');
        }

        function hideTimer(timerId) {
            document.getElementById(timerId).classList.remove('visible');
        }

        function showSoundWave(elementId) {
            document.getElementById(elementId).classList.add('active');
        }

        function hideSoundWave(elementId) {
            document.getElementById(elementId).classList.remove('active');
        }

        function buildWoodenHouse() {
            if (isAnimating) return;

            isAnimating = true;
            disableButtons();
            buildStartTime = Date.now();

            const character = document.getElementById('buildCharacter');
            const woodenHouse = document.getElementById('woodenHouse');
            const buildingTools = document.getElementById('buildingTools');
            const constructionEffect = document.getElementById('constructionEffect');
            const statusDisplay = document.getElementById('statusDisplay');

            demoUsage.wooden++;
            updateProgress();

            showTimer('buildTimer');
            showSoundWave('buildSoundWave');

            const timerInterval = setInterval(() => {
                updateTimer('buildTimer', buildStartTime);
            }, 1000);

            statusDisplay.classList.add('updating');
            statusDisplay.innerHTML = 'üî® Gathering heavy tools... hammers, saws, nails, lumber... ü™ö';

            // Show tools and character working
            buildingTools.classList.add('visible');
            character.classList.add('working');

            setTimeout(() => {
                statusDisplay.innerHTML = 'üí™ Measuring, cutting, hammering... *BANG BANG* *BZZZZT* This requires skill and strength! üòÖ';
                constructionEffect.classList.add('show');
                createConstructionNoise();
            }, 2500);

            setTimeout(() => {
                constructionEffect.classList.remove('show');
            }, 3000);

            setTimeout(() => {
                statusDisplay.innerHTML = '‚è∞ Still building... drilling, nailing, adjusting... This is taking forever! üò∞';
                constructionEffect.classList.add('show');
            }, 5000);

            setTimeout(() => {
                constructionEffect.classList.remove('show');
            }, 5500);

            setTimeout(() => {
                statusDisplay.innerHTML = 'üè† Finally finished! Heavy wooden playhouse built... but that was exhausting work! üò§';
                woodenHouse.classList.add('built');
                character.classList.remove('working');
                character.classList.add('celebrating');
                createSuccessEffect('build');
                clearInterval(timerInterval);
                hideTimer('buildTimer');
                hideSoundWave('buildSoundWave');

                const finalTime = Math.floor((Date.now() - buildStartTime) / 1000);
                document.getElementById('buildTimeMetric').innerHTML = `${finalTime}s`;
            }, 7500);

            setTimeout(() => {
                statusDisplay.innerHTML = 'üí≠ This wooden house is strong and permanent, but it took so much effort and can\'t be moved! ü§î';
                character.classList.remove('celebrating');
                buildingTools.classList.remove('visible');
                enableButtons();
                isAnimating = false;
                showEducationalTip('wooden');
            }, 10000);
        }

        function setupTent() {
            if (isAnimating) return;

            isAnimating = true;
            disableButtons();
            setupStartTime = Date.now();

            const character = document.getElementById('setupCharacter');
            const tentHouse = document.getElementById('tentHouse');
            const tentBag = document.getElementById('tentBag');
            const setupEffect = document.getElementById('setupEffect');
            const statusDisplay = document.getElementById('statusDisplay');

            demoUsage.tent++;
            updateProgress();

            showTimer('setupTimer');
            showSoundWave('setupSoundWave');

            const timerInterval = setInterval(() => {
                updateTimer('setupTimer', setupStartTime);
            }, 1000);

            statusDisplay.classList.add('updating');
            statusDisplay.innerHTML = 'üéí Grabbing the lightweight tent bag... it weighs almost nothing! ‚ú®';

            // Character picks up bag
            character.classList.add('working');

            setTimeout(() => {
                statusDisplay.innerHTML = 'üì¶ Unfolding the flexible tent fabric... just shake it out! *WHOOSH* üí®';
                tentBag.classList.add('hidden');
                setupEffect.classList.add('show');
                createSetupMagic();
            }, 2000);

            setTimeout(() => {
                setupEffect.classList.remove('show');
            }, 2500);

            setTimeout(() => {
                statusDisplay.innerHTML = 'üé™ *POP!* The tent springs into shape automatically! Just click the poles! *SNAP* ‚ö°';
                tentHouse.classList.add('setup');
                setupEffect.classList.add('show');
            }, 3500);

            setTimeout(() => {
                setupEffect.classList.remove('show');
            }, 4000);

            setTimeout(() => {
                statusDisplay.innerHTML = 'üéâ AMAZING! Instant playhouse in seconds! Light, flexible, and ready for fun! üåà';
                character.classList.remove('working');
                character.classList.add('celebrating');
                createSuccessEffect('setup');
                clearInterval(timerInterval);
                hideTimer('setupTimer');
                hideSoundWave('setupSoundWave');

                const finalTime = Math.floor((Date.now() - setupStartTime) / 1000);
                document.getElementById('setupTimeMetric').innerHTML = `${finalTime}s`;

                if (finalTime < 5) {
                    earnAchievement('innovator');
                }
            }, 5000);

            setTimeout(() => {
                statusDisplay.innerHTML = '‚ú® Tuy·ªát v·ªùi! V·∫£i m·ªèng n√†y th·ª±c hi·ªán c√πng ch·ª©c nƒÉng nh∆∞ g·ªó n·∫∑ng nh∆∞ng l·∫°i nh·∫π v√† l·∫Øp ƒë·∫∑t nhanh! üöÄ';
                character.classList.remove('celebrating');
                enableButtons();
                isAnimating = false;
                showEducationalTip('tent');
            }, 7500);
        }

        function createConstructionNoise() {
            const sounds = ['üí•', 'üî®', '‚ö°', 'üí¢', 'ü™ö', 'üî©'];

            for (let i = 0; i < 12; i++) {
                setTimeout(() => {
                    const noise = document.createElement('div');
                    noise.textContent = sounds[Math.floor(Math.random() * sounds.length)];
                    noise.style.cssText = `
                        position: fixed;
                        bottom: ${200 + Math.random() * 150}px;
                        left: ${35 + Math.random() * 30}%;
                        font-size: ${1.5 + Math.random() * 1}em;
                        z-index: 1000;
                        pointer-events: none;
                        animation: noiseFloat 2s ease-out forwards;
                    `;

                    addKeyframes('noiseFloat', `
                        0% { opacity: 1; transform: translateY(0) rotate(0deg) scale(1); }
                        100% { opacity: 0; transform: translateY(-100px) rotate(360deg) scale(0.5); }
                    `);

                    document.body.appendChild(noise);

                    setTimeout(() => {
                        if (noise.parentNode) {
                            noise.parentNode.removeChild(noise);
                        }
                    }, 2000);
                }, i * 150);
            }
        }

        function createSetupMagic() {
            const magic = ['‚ú®', 'üåü', 'üí´', '‚≠ê', 'ü™Ñ', 'üíé', 'üîÆ'];

            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.textContent = magic[Math.floor(Math.random() * magic.length)];
                    sparkle.style.cssText = `
                        position: fixed;
                        bottom: ${150 + Math.random() * 200}px;
                        left: ${40 + Math.random() * 20}%;
                        font-size: ${1 + Math.random() * 1.5}em;
                        z-index: 1000;
                        pointer-events: none;
                        animation: magicTwinkle 2.5s ease-out forwards;
                    `;

                    addKeyframes('magicTwinkle', `
                        0% { opacity: 1; transform: scale(0) rotate(0deg); }
                        50% { opacity: 1; transform: scale(1.3) rotate(180deg); }
                        100% { opacity: 0; transform: scale(0.3) rotate(720deg); }
                    `);

                    document.body.appendChild(sparkle);

                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.parentNode.removeChild(sparkle);
                        }
                    }, 2500);
                }, i * 80);
            }
        }

        function createSuccessEffect(type) {
            const celebrations = type === 'build' ? ['üéâ', 'üèÜ', 'üí™', 'üî®', 'üè†'] : ['üé™', '‚ú®', 'üåü', 'üéà', '‚ö°', 'üöÄ'];

            for (let i = 0; i < 25; i++) {
                const celebrate = document.createElement('div');
                celebrate.textContent = celebrations[Math.floor(Math.random() * celebrations.length)];
                celebrate.style.cssText = `
                    position: fixed;
                    bottom: ${180 + Math.random() * 150}px;
                    left: ${35 + Math.random() * 30}%;
                    font-size: ${1.2 + Math.random() * 1}em;
                    z-index: 1000;
                    pointer-events: none;
                    animation: celebrationBurst 3s ease-out forwards;
                `;

                addKeyframes('celebrationBurst', `
                    0% { opacity: 1; transform: scale(0.3) translateY(0) rotate(0deg); }
                    50% { opacity: 1; transform: scale(1.5) translateY(-60px) rotate(180deg); }
                    100% { opacity: 0; transform: scale(0.8) translateY(-150px) rotate(720deg); }
                `);

                document.body.appendChild(celebrate);

                setTimeout(() => {
                    if (celebrate.parentNode) {
                        celebrate.parentNode.removeChild(celebrate);
                    }
                }, 3000);
            }
        }

        function resetDemo() {
            if (isAnimating) return;

            demoUsage = { wooden: 0, tent: 0 };
            hasCompletedBoth = false;
            quizAnswered = false;

            // Reset wooden house elements
            const woodenHouse = document.getElementById('woodenHouse');
            const buildingTools = document.getElementById('buildingTools');
            const buildCharacter = document.getElementById('buildCharacter');

            woodenHouse.classList.remove('built');
            buildingTools.classList.remove('visible');
            buildCharacter.classList.remove('working', 'celebrating');

            // Reset tent elements
            const tentHouse = document.getElementById('tentHouse');
            const tentBag = document.getElementById('tentBag');
            const setupCharacter = document.getElementById('setupCharacter');

            tentHouse.classList.remove('setup');
            tentBag.classList.remove('hidden');
            setupCharacter.classList.remove('working', 'celebrating');

            // Reset timers and sound waves
            hideTimer('buildTimer');
            hideTimer('setupTimer');
            hideSoundWave('buildSoundWave');
            hideSoundWave('setupSoundWave');

            // Reset quiz
            const quizSection = document.getElementById('quizSection');
            quizSection.classList.remove('visible');
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.classList.remove('correct', 'incorrect');
                option.disabled = false;
            });
            document.getElementById('quizQuestion').innerHTML = 'üß† Quick Quiz: What\'s the main advantage of using flexible shells over solid materials?';

            // Reset metrics
            document.getElementById('buildTimeMetric').innerHTML = '‚è∞';
            document.getElementById('setupTimeMetric').innerHTML = '‚ö°';

            document.getElementById('statusDisplay').innerHTML = 'H√£y th·ª≠ x√¢y nh√† g·ªó tr∆∞·ªõc, r·ªìi kh√°m ph√° ph√©p m√†u TRIZ! üè†‚ú®';
            document.getElementById('statusDisplay').classList.remove('updating');

            updateProgress();
            enableButtons();

            showResetConfirmation();
        }

        function showResetConfirmation() {
            const confirmation = document.createElement('div');
            confirmation.innerHTML = 'üîÑ ƒê√£ l√†m m·ªõi m√¥ ph·ªèng! H√£y tr·∫£i nghi·ªám l·∫°i c·∫£ hai c√°ch ƒë·ªÉ l√†m ch·ªß TRIZ! üèóÔ∏è';
            confirmation.style.cssText = `
                position: fixed;
                top: 20px;
                left: 12px;
                transform: none;
                background: linear-gradient(135deg, #9b59b6, #8e44ad);
                color: white;
                padding: 18px 30px;
                border-radius: 25px;
                font-weight: bold;
                z-index: 1000;
                box-shadow: 0 12px 35px rgba(0,0,0,0.3);
                animation: slideDown 0.6s ease-out;
                border: 3px solid rgba(255,255,255,0.2);
            `;

            addKeyframes('slideDown', `
                from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                to { transform: translateX(-50%) translateY(0); opacity: 1; }
            `);

            document.body.appendChild(confirmation);

            setTimeout(() => {
                confirmation.style.animation = 'slideUp 0.6s ease-in';
                addKeyframes('slideUp', `
                    from { transform: translateX(-50%) translateY(0); opacity: 1; }
                    to { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                `);
                setTimeout(() => {
                    if (confirmation.parentNode) {
                        confirmation.parentNode.removeChild(confirmation);
                    }
                }, 600);
            }, 4000);
        }

        function showEducationalTip(type) {
            const tips = {
                wooden: [
                    "üí° L∆∞u √Ω: V·∫≠t li·ªáu ƒë·∫∑c nh∆∞ g·ªó c·∫ßn nhi·ªÅu d·ª•ng c·ª• chuy√™n bi·ªát v√† t·ªën nhi·ªÅu th·ªùi gian!",
                    "üí° V·∫≠t li·ªáu n·∫∑ng gi√∫p ch·∫Øc ch·∫Øn nh∆∞ng l√†m gi·∫£m t√≠nh di ƒë·ªông v√† d·ªÖ s·ª≠ d·ª•ng!",
                    "üí° X√¢y d·ª±ng truy·ªÅn th·ªëng ƒë√≤i h·ªèi k·ªπ nƒÉng, l√™n k·∫ø ho·∫°ch v√† n·ªó l·ª±c li√™n t·ª•c!",
                    "üí° Khi ƒë√£ x√¢y xong, c·∫•u tr√∫c ƒë·∫∑c r·∫•t kh√≥ di chuy·ªÉn ho·∫∑c thay ƒë·ªïi!",
                    "üí° C√°ch c≈©: nhi·ªÅu v·∫≠t li·ªáu, nhi·ªÅu d·ª•ng c·ª•, nhi·ªÅu th·ªùi gian, nhi·ªÅu ph·ª©c t·∫°p!"
                ],
                tent: [
                    "üí° ƒê√¢y l√† Nguy√™n t·∫Øc TRIZ 30: V·ªè d·∫ªo v√† m√†ng m·ªèng!",
                    "üí° V·∫£i m·ªèng th·ª±c hi·ªán c√πng ch·ª©c nƒÉng che ch·∫Øn nh∆∞ g·ªó d√†y nh∆∞ng c√≥ ∆∞u th·∫ø v∆∞·ª£t tr·ªôi!",
                    "üí° V·∫≠t li·ªáu d·∫ªo c√≥ th·ªÉ th√≠ch nghi v·ªõi nhi·ªÅu h√¨nh d·∫°ng, kh√¥ng gian v√† nhu c·∫ßu!",
                    "üí° K·ªπ thu·∫≠t th√¥ng minh: c√πng ch·ª©c nƒÉng, nh∆∞ng nh·∫π h∆°n, nhanh h∆°n, th√¢n thi·ªán h∆°n!",
                    "üí° Nguy√™n l√Ω ƒë·ªïi m·ªõi: thay v·∫≠t li·ªáu ƒë·∫∑c b·∫±ng v·∫≠t li·ªáu d·∫ªo ƒë·ªÉ m·ªü ra kh·∫£ nƒÉng m·ªõi!",
                    "üí° C√°ch TRIZ: √≠t v·∫≠t li·ªáu, √≠t d·ª•ng c·ª•, √≠t th·ªùi gian, linh ho·∫°t h∆°n!"
                ]
            };

            const tipList = tips[type];
            const randomTip = tipList[Math.floor(Math.random() * tipList.length)];

            const tip = document.createElement('div');
            tip.textContent = randomTip;
            tip.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                padding: 25px 30px;
                border-radius: 25px;
                font-weight: bold;
                max-width: 400px;
                z-index: 1000;
                box-shadow: 0 12px 40px rgba(0,0,0,0.3);
                font-size: 15px;
                line-height: 1.7;
                border: 3px solid rgba(255,255,255,0.3);
                backdrop-filter: blur(15px);
                animation: tipSlideIn 0.7s ease-out;
            `;

            addKeyframes('tipSlideIn', `
                from { transform: translateX(120%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            `);

            document.body.appendChild(tip);

            setTimeout(() => {
                tip.style.animation = 'tipSlideOut 0.7s ease-in';
                addKeyframes('tipSlideOut', `
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(120%); opacity: 0; }
                `);
                setTimeout(() => {
                    if (tip.parentNode) {
                        tip.parentNode.removeChild(tip);
                    }
                }, 700);
            }, 6000);
        }

        function showCongratulations() {
            const congratsMessage = document.createElement('div');
            congratsMessage.innerHTML = `
                <div style="font-size: 2.5em; margin-bottom: 15px;">üéâ</div>
                <div style="font-size: 1.4em; margin-bottom: 15px;"><strong>Th√†nh t·ª±u xu·∫•t s·∫Øc!</strong></div>
                <div style="margin-bottom: 10px;">B·∫°n ƒë√£ l√†m ch·ªß Nguy√™n t·∫Øc TRIZ s·ªë 30!</div>
                <div style="margin-bottom: 10px;">Gi·ªù b·∫°n ƒë√£ hi·ªÉu c√°ch v·ªè d·∫ªo v√† m√†ng m·ªèng</div>
                <div>c√≥ th·ªÉ c√°ch m·∫°ng h√≥a thi·∫øt k·∫ø b·∫±ng c√°ch thay th·∫ø v·∫≠t li·ªáu n·∫∑ng, c·ª©ng! üé™‚ú®</div>
            `;
            congratsMessage.style.cssText = `
                position: fixed;
                top: 50%;
                left: 12px;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #FFD700, #FFA500, #FF6B6B, #4ECDC4);
                color: #333;
                padding: 40px;
                border-radius: 35px;
                font-weight: bold;
                max-width: 500px;
                z-index: 2000;
                box-shadow: 0 25px 60px rgba(0,0,0,0.4);
                text-align: center;
                font-size: 16px;
                line-height: 1.7;
                border: 5px solid white;
                animation: celebrationPop 1s ease-out;
            `;

            addKeyframes('celebrationPop', `
                0% { transform: translate(-50%, -50%) scale(0) rotate(-720deg); opacity: 0; }
                60% { transform: translate(-50%, -50%) scale(1.1) rotate(-20deg); opacity: 0.9; }
                100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
            `);

            document.body.appendChild(congratsMessage);

            // Add enhanced confetti effect
            createConfetti();

            setTimeout(() => {
                congratsMessage.style.animation = 'celebrationFade 0.8s ease-in';
                addKeyframes('celebrationFade', `
                    from { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
                    to { opacity: 0; transform: translate(-50%, -50%) scale(0.8) rotate(15deg); }
                `);
                setTimeout(() => {
                    if (congratsMessage.parentNode) {
                        congratsMessage.parentNode.removeChild(congratsMessage);
                    }
                }, 800);
            }, 7000);
        }

        function createConfetti() {
            const colors = ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57', '#FF9FF3', '#54A0FF'];
            const symbols = ['üé™', 'üßµ', '‚ú®', 'üåü', 'üéà', 'üéä', 'üéâ', 'üèÜ', 'üí´', '‚≠ê'];

            for (let i = 0; i < 80; i++) {
                const confetti = document.createElement('div');
                const isSymbol = Math.random() > 0.4;

                if (isSymbol) {
                    confetti.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                    confetti.style.fontSize = '24px';
                } else {
                    confetti.style.width = '12px';
                    confetti.style.height = '12px';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = '50%';
                }

                confetti.style.cssText += `
                    position: fixed;
                    top: -20px;
                    left: ${Math.random() * 100}%;
                    z-index: 1500;
                    pointer-events: none;
                    animation: confettiFall ${3 + Math.random() * 4}s linear forwards;
                `;

                document.body.appendChild(confetti);

                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.parentNode.removeChild(confetti);
                    }
                }, 7000);
            }

            addKeyframes('confettiFall', `
                to {
                    transform: translateY(110vh) rotate(1440deg);
                    opacity: 0;
                }
            `);
        }

        function showExampleDetail(type) {
            const details = {
                umbrella: "‚òÇÔ∏è √î che m∆∞a th·ªÉ hi·ªán ho√†n h·∫£o Nguy√™n t·∫Øc TRIZ 30: l·ªõp v·∫£i m·ªèng cƒÉng tr√™n khung nh·∫π thay cho vi·ªác ph·∫£i mang m√°i nh√† n·∫∑ng n·ªÅ!",
                raincoat: "üß• √Åo m∆∞a l√† l·ªõp v·ªè ch·ªëng n∆∞·ªõc d·∫ªo, linh ho·∫°t, di chuy·ªÉn theo c∆° th·ªÉ - v∆∞·ª£t tr·ªôi h∆°n h·∫≥n b·∫£o v·ªá c·ª©ng nh·∫Øc, c·ªìng k·ªÅnh!",
                bubbles: "ü´ß Bong b√≥ng x√† ph√≤ng cho th·∫•y m√†ng si√™u m·ªèng (ch·ªâ d√†y v√†i ph√¢n t·ª≠!) c√≥ th·ªÉ d√πng s·ª©c cƒÉng b·ªÅ m·∫∑t ƒë·ªÉ gi·ªØ kh√¥ng kh√≠ th√†nh h√¨nh c·∫ßu ho√†n h·∫£o - v·ªè d·∫ªo t·ª± nhi√™n!",
                balloons: "üéà B√≥ng bay l√† v·ªè d·∫ªo c√≥ th·ªÉ ph·ªìng l√™n ch·ª©a nhi·ªÅu kh√≠ kh√°c nhau m√† v·∫´n nh·∫π v√† vui nh·ªôn!",
                tarp: "üèïÔ∏è B·∫°t che & ph·ªß d√πng m√†ng m·ªèng ch·ªëng n∆∞·ªõc ƒë·ªÉ b·∫£o v·ªá nh∆∞ m√°i nh√† ƒë·∫∑c nh∆∞ng c√≥ th·ªÉ cu·ªôn l·∫°i, d·ªÖ mang theo v√† th√≠ch nghi nhi·ªÅu h√¨nh d·∫°ng!",
                inflatable: "üõü Thi·∫øt b·ªã b∆°m h∆°i d√πng v·ªè d·∫ªo ch·ª©a kh√≠ t·∫°o b·ªÅ m·∫∑t an to√†n, ƒë√†n h·ªìi cho vui ch∆°i - an to√†n v√† linh ho·∫°t h∆°n v·∫≠t li·ªáu ƒë·∫∑c!",
                greenhouse: "üå± Nh√† k√≠nh hi·ªán ƒë·∫°i d√πng m√†ng nh·ª±a m·ªèng thay cho k√≠nh n·∫∑ng - v·∫´n truy·ªÅn s√°ng v√† b·∫£o v·ªá th·ªùi ti·∫øt nh∆∞ng nh·∫π h∆°n, d·ªÖ l·∫Øp ƒë·∫∑t h∆°n nhi·ªÅu!",
                membrane: "üè¢ Ki·∫øn tr√∫c hi·ªán ƒë·∫°i s·ª≠ d·ª•ng m√†ng d·∫ªo ƒë·ªÉ t·∫°o n√™n c√¥ng tr√¨nh nh·∫π, ·∫•n t∆∞·ª£ng m√† v·∫≠t li·ªáu truy·ªÅn th·ªëng kh√¥ng th·ªÉ l√†m ƒë∆∞·ª£c!"
            };

            const detail = document.createElement('div');
            detail.innerHTML = details[type];
            detail.style.cssText = `
                position: fixed;
                bottom: 30px;
                left: 30px;
                background: linear-gradient(135deg, #FF6B6B, #4ECDC4, #45B7D1);
                color: white;
                padding: 25px;
                border-radius: 25px;
                font-weight: bold;
                max-width: 420px;
                z-index: 1000;
                box-shadow: 0 15px 45px rgba(0,0,0,0.3);
                font-size: 14px;
                line-height: 1.8;
                border: 3px solid rgba(255,255,255,0.4);
                backdrop-filter: blur(20px);
                animation: detailSlideUp 1s ease-out;
            `;

            addKeyframes('detailSlideUp', `
                from { transform: translateY(100%) scale(0.8); opacity: 0; }
                to { transform: translateY(0) scale(1); opacity: 1; }
            `);

            document.body.appendChild(detail);

            setTimeout(() => {
                detail.style.animation = 'detailSlideDown 0.8s ease-in';
                addKeyframes('detailSlideDown', `
                    from { opacity: 1; transform: translateY(0) scale(1); }
                    to { opacity: 0; transform: translateY(60px) scale(0.9); }
                `);
                setTimeout(() => {
                    if (detail.parentNode) {
                        detail.parentNode.removeChild(detail);
                    }
                }, 800);
            }, 5000);
        }

        function addKeyframes(name, keyframes) {
            if (!document.querySelector(`#${name}Styles`)) {
                const style = document.createElement('style');
                style.id = name + 'Styles';
                style.textContent = `@keyframes ${name} { ${keyframes} }`;
                document.head.appendChild(style);
            }
        }

        // Enhanced interactions and animations
        document.addEventListener('DOMContentLoaded', function () {
            // Add keyboard support
            document.addEventListener('keydown', function (e) {
                if (e.key === '1' && !isAnimating) {
                    buildWoodenHouse();
                } else if (e.key === '2' && !isAnimating) {
                    setupTent();
                } else if (e.key === 'r' || e.key === 'R') {
                    resetDemo();
                } else if (e.key === 'q' || e.key === 'Q') {
                    if (!quizAnswered && hasCompletedBoth) {
                        showQuiz();
                    }
                }
            });

            // Add character interaction on click
            const characters = document.querySelectorAll('.character');
            characters.forEach(character => {
                character.addEventListener('click', function () {
                    if (!isAnimating) {
                        const expressions = ['üòä', 'ü§î', 'üòé', 'ü§ó', 'üí™', 'üß†', 'üéâ'];
                        const randomExpression = expressions[Math.floor(Math.random() * expressions.length)];
                        const originalContent = this.innerHTML;

                        this.innerHTML = randomExpression;

                        setTimeout(() => {
                            this.innerHTML = originalContent;
                        }, 2000);
                    }
                });

                // Add keyboard accessibility
                character.addEventListener('keydown', function (e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });

            // Initialize progress
            updateProgress();

            // Add accessibility announcements
            const statusDisplay = document.getElementById('statusDisplay');
            const observer = new MutationObserver(function (mutations) {
                mutations.forEach(function (mutation) {
                    if (mutation.type === 'childList' || mutation.type === 'characterData') {
                        // Announce status changes to screen readers
                        const announcement = document.createElement('div');
                        announcement.setAttribute('aria-live', 'polite');
                        announcement.setAttribute('aria-atomic', 'true');
                        announcement.className = 'sr-only';
                        announcement.textContent = statusDisplay.textContent;
                        document.body.appendChild(announcement);

                        setTimeout(() => {
                            if (announcement.parentNode) {
                                document.body.removeChild(announcement);
                            }
                        }, 100);
                    }
                });
            });

            observer.observe(statusDisplay, {
                childList: true,
                subtree: true,
                characterData: true
            });
        });

        function showWelcomeMessage() {
            const welcome = document.createElement('div');
            welcome.innerHTML = `
                <div style="font-size: 1.8em; margin-bottom: 10px;">üëã Xin ch√†o!</div>
                <div style="margin-bottom: 10px;">Kh√°m ph√° Nguy√™n t·∫Øc TRIZ 30 b·∫±ng c√°ch th·ª≠ c·∫£ hai c√°ch ch∆°i nh√†.</div>
                <div>Nh·∫•n v√†o nh√¢n v·∫≠t ho·∫∑c n√∫t ƒë·ªÉ b·∫Øt ƒë·∫ßu!</div>
                <div style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">üí° M·∫πo: D√πng ph√≠m t·∫Øt 1, 2, R, v√† Q</div>
            `;
            welcome.style.cssText = `
                position: fixed;
                top: 50%;
                left: 12px;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                padding: 30px;
                border-radius: 25px;
                font-weight: bold;
                max-width: 450px;
                z-index: 2000;
                box-shadow: 0 20px 50px rgba(0,0,0,0.4);
                text-align: center;
                font-size: 16px;
                line-height: 1.6;
                border: 3px solid rgba(255,255,255,0.3);
                animation: welcomePop 0.8s ease-out;
            `;

            addKeyframes('welcomePop', `
                0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
                100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            `);

            document.body.appendChild(welcome);

            // Add click to dismiss
            welcome.addEventListener('click', function () {
                welcome.style.animation = 'welcomeFade 0.5s ease-in';
                addKeyframes('welcomeFade', `
                    from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                    to { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                `);
                setTimeout(() => {
                    if (welcome.parentNode) {
                        welcome.parentNode.removeChild(welcome);
                    }
                }, 500);
            });

            setTimeout(() => {
                if (welcome.parentNode) {
                    welcome.click();
                }
            }, 8000);
        }

        // Show periodic educational facts
        function showRandomFact() {
            const facts = [
                "üé™ B·∫°n c√≥ bi·∫øt? Nh·ªØng chi·∫øc l·ªÅu di ƒë·ªông ƒë·∫ßu ti√™n do ng∆∞·ªùi du m·ª•c ph√°t minh h∆°n 5000 nƒÉm tr∆∞·ªõc - h·ªç ƒë√£ hi·ªÉu TRIZ tr∆∞·ªõc khi c√≥ t√™n g·ªçi!",
                "ü´ß V·∫≠t l√Ω k·ª≥ di·ªáu: Bong b√≥ng x√† ph√≤ng lu√¥n th√†nh h√¨nh c·∫ßu v√¨ s·ª©c cƒÉng b·ªÅ m·∫∑t t·ª± ƒë·ªông l√†m nh·ªè di·ªán t√≠ch nh·∫•t!",
                "‚òÇÔ∏è S·ª± ki·ªán l·ªãch s·ª≠: √î g·∫≠p ƒë·∫ßu ti√™n xu·∫•t hi·ªán ·ªü Paris nƒÉm 1852, c√°ch m·∫°ng h√≥a vi·ªác che m∆∞a c√° nh√¢n!",
                "üè¢ K·ª≥ t√≠ch k·ªπ thu·∫≠t: M√°i s√¢n v·∫≠n ƒë·ªông hi·ªán ƒë·∫°i d√πng m√†ng d·∫ªo c√≥ th·ªÉ che di·ªán t√≠ch l·ªõn h∆°n 10 s√¢n b√≥ng ch·ªâ v·ªõi √≠t tr·ª• ƒë·ª°!",
                "üéà V·∫≠t li·ªáu th√¥ng minh: M·ªôt qu·∫£ b√≥ng bay c√≥ th·ªÉ ph·ªìng to h∆°n 100 l·∫ßn th·ªÉ t√≠ch ban ƒë·∫ßu m√† v·∫´n gi·ªØ ƒë∆∞·ª£c c·∫•u tr√∫c!",
                "üå± S√°ng t·∫°o xanh: M√†ng nh√† k√≠nh hi·ªán ƒë·∫°i c√≥ th·ªÉ trong su·ªët 98% m√† v·∫´n ch·ªëng UV v√† ch·ªãu th·ªùi ti·∫øt t·ªët!",
                "üèïÔ∏è C√¥ng ngh·ªá d√£ ngo·∫°i: L·ªÅu c·∫Øm tr·∫°i ti√™n ti·∫øn ng√†y nay n·∫∑ng ch∆∞a ƒë·∫øn 1kg m√† v·∫´n che ƒë∆∞·ª£c nhi·ªÅu ng∆∞·ªùi trong ƒëi·ªÅu ki·ªán kh·∫Øc nghi·ªát!",
                "üõü K·ªπ thu·∫≠t an to√†n: Phao c·ª©u sinh b∆°m h∆°i c√≥ th·ªÉ bung ra d∆∞·ªõi 60 gi√¢y v√† ch·ªãu t·∫£i l·ªõn h∆°n nhi·ªÅu l·∫ßn tr·ªçng l∆∞·ª£ng b·∫£n th√¢n!"
            ];

            if (Math.random() > 0.7 && !isAnimating) { // Show less frequently and not during animations
                const randomFact = facts[Math.floor(Math.random() * facts.length)];

                const factBubble = document.createElement('div');
                factBubble.textContent = randomFact;
                factBubble.style.cssText = `
                    position: fixed;
                    bottom: 30px;
                    left: 30px;
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    color: white;
                    padding: 25px;
                    border-radius: 25px;
                    font-weight: bold;
                    max-width: 420px;
                    z-index: 1000;
                    box-shadow: 0 15px 45px rgba(0,0,0,0.3);
                    font-size: 14px;
                    line-height: 1.8;
                    border: 3px solid rgba(255,255,255,0.4);
                    backdrop-filter: blur(20px);
                    animation: factFloat 1s ease-out;
                `;

                addKeyframes('factFloat', `
                    from { transform: translateY(100%) scale(0.8); opacity: 0; }
                    to { transform: translateY(0) scale(1); opacity: 1; }
                `);

                document.body.appendChild(factBubble);

                setTimeout(() => {
                    factBubble.style.animation = 'factSink 0.8s ease-in';
                    addKeyframes('factSink', `
                        from { opacity: 1; transform: translateY(0) scale(1); }
                        to { opacity: 0; transform: translateY(100px) scale(0.8); }
                    `);
                    setTimeout(() => {
                        if (factBubble.parentNode) {
                            factBubble.parentNode.removeChild(factBubble);
                        }
                    }, 800);
                }, 5000);
            }
        }

        // Show first fact after 15 seconds, then every 45 seconds
        setTimeout(showRandomFact, 15000);
        setInterval(showRandomFact, 45000);
    </script>
</body>

</html>